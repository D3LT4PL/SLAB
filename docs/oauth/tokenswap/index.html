<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>SLAB landing page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
<div id="head">
  <img src="img/slab web.png"/>
</div>
<div id="body">
  <div id="content">
    <div class="section">
      <div class="button" id="fake-button">
        <p>Paste the code into your</p>
        <p>Discord conversation with SLAB</p>
      </div>
    </div>
    <div class="section">
      <div class="divider">
        <strong>your code</strong>
      </div>
    </div>
<script>
  function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
      vars[key] = value;
    });
    return vars;
  }

  var code = getUrlVars()["code"];

  var state = getUrlVars()["state"];
  state = atob(state);

  var output = "<div class='section'><input type\"text\" value=\"{}\" id=\"encryptedBox\"></div>";
  var decrypted = code+"#"+state
  var encrypted = btoa(decrypted)
  document.write(output.replace(/{}/, encrypted));
  document.write("<div class='section'><button class='button' onclick=\"copyEncrypted()\">Copy code</button></div>");
  function copyEncrypted() {
    var copyEncrypted = document.getElementById("encryptedBox");
    copyEncrypted.select();
    document.execCommand("copy");
    alert("Copied the code. You can now paste it into Discord.");
  }
</script>
<br/>
</div>
  <p id="github">Â© 2019 GitHub, Inc.</p>
  <i id="thx">Thanks for using SLAB!</i>
</div>
</body>
</html>

